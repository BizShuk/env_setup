#!/bin/bash
# output docker container name , ip , and id to file

#CMD: docker-psinfo [ filter name , ]

filter_name=$1
[ -n $filter_name ] && filter_name="-f='name=$filter_name'"



IFS=$'\n'
c_info=($(docker ps --format="{{.Names}}\\t{{.ID}}" ${filter_name} ))

for c_vars in "${c_info[@]}" 
do
    c_name=$(echo -e "$c_vars" | awk '{print $1}')
    ip=$(docker exec -i $c_name /bin/bash -c "hostname -I" 2>&1)
    echo -e "$c_vars\t$ip"
done



